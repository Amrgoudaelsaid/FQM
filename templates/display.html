<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

{% extends "base_s.html" %}
{% block title %} FQM - {{ ptitle }} {% endblock %}

{% block page_content %}
<script type="text/javascript">
 function update_values(fr) {
     $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
     $.getJSON($SCRIPT_ROOT+"/feed",
	       function(data) {
           if ( data.refre == 1 ) { location.reload(); }
           {% if ar %}
		       if ($("#hm1").text() == "المكتب : "+data.con && $("#hm2").text() == "التذكرة : "+data.cot && $("#hm3").text() == "المهمة : "+data.cott && $("#hcounter").text() == data.w9) {
             $("#hm1").text("المكتب : "+data.con);
		         $("#hm2").text("التذكرة : "+data.cot);
		         $("#hm3").text("المهمة : "+data.cott);
		       } else {
		         $("#hm1").text("المكتب : "+data.con);
		         $("#hm2").text("التذكرة : "+data.cot);
  		       $("#hm3").text("المهمة : "+data.cott);
           {% else %}
		       if ($("#hm1").text() == "Office : "+data.con && $("#hm2").text() == "Ticket : "+data.cot && $("#hm3").text() == "Task : "+data.cott && $("#hcounter").text() == data.w9) {
		         $("#hm1").text("Office : "+data.con);
		         $("#hm2").text("Ticket : "+data.cot);
		         $("#hm3").text("Task : "+data.cott);
		       } else {
		         $("#hm1").text("Office : "+data.con);
		         $("#hm2").text("Ticket : "+data.cot);
  		       $("#hm3").text("Task : "+data.cott);
          {% endif %}
		         var au = document.getElementById("audio_1")
		         if ( au != null ) {
			         au.play();
		          }
		         var au2 = document.getElementById("audio_2")
		         if ( au2 != null ) {
			         function pau2(){
                 var au3 = document.getElementById("audio_3")
                 if ( au3 != null ){
                   au3.src = "{{ url_for('static', filename='tts/') }}"+"ar_"+data.anf
                   au3.load();
                   au3.volume = 1.0
                 }
                 au2.src = "{{ url_for('static', filename='tts/') }}"+data.anf
                 au2.load();
                 au2.volume = 1.0
                 au2.play();
                 var loopCounter = 1
                 var loopLimit = {{ anr }}
                 if ( au3 != null ) { loopLimit = loopLimit + 1 }
                 au2.addEventListener('ended', function(){
                    if (loopCounter < loopLimit){
                      if ( au3 != null ) {
                        au3.currentTime = 0
                        au3.play();
                        loopCounter++;
                        au3.addEventListener('ended', function(){
                          if (loopCounter < loopLimit){
                            au2.currentTime = 0
                            au2.play();
                          }
                        }, false)
                      } else {
                        au2.currentTime = 0
                        au2.play();
                        loopCounter++;
                      }
                    }
                  }, false);
                }
			       if (au != null){
			         au.addEventListener("ended", function() {
    				     pau2();
			         });
			       } else {
			         pau2();
			       }

		       }
		       function fit(j){
			       $(j).fadeIn(fr/2).fadeOut(fr/2).fadeIn(fr/2).fadeOut(fr/2).fadeIn(fr/2).fadeOut(fr/2).fadeIn(fr/3);
			       if(j=="#msg") {
			         setTimeout(function(){
				       $(j).fadeOut();
			        }, fr*3.5);
			       }
		        }
		       fit("#hm1");
		       fit("#hm2");
           fit("#hm3");
		   }
		   $("#hs1").text(data.w1);
		   $("#hs2").text(data.w2);
		   $("#hs3").text(data.w3);
		   $("#hs4").text(data.w4);
		   $("#hs5").text(data.w5);
		   $("#hs6").text(data.w6);
		   $("#hs7").text(data.w7);
		   $("#hs8").text(data.w8);
       $('#hcounter').text(data.w9);
	       });
 }
 function tom(tmm, fr) {
     window.setInterval(function(){
	 update_values(fr)
     }, tmm);
 }
 window.onload = function(){
     tom({{ ts.rrate }},{{ ts.mduration }});
 };
</script>

<style>
 body {
     {% if ts.bgcolor[:3] == "rgb" %}
     background: {{ ts.bgcolor }};
     {% else %}
     background-image: url({{ url_for('static', filename='multimedia/'+ts.bgcolor) }});
     {% endif %}
     background-repeat: no-repeat;
     background-attachment: fixed;
     background-position: center;
     background-size: cover;
 }
 .vertical-center {
     min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
     min-height: 100vh; /* These two lines are counted as one :-)       */
     display: flex;
     align-items: center;
 }
</style>


{% if tv == 0 %}
<div class="row">
    <div class="col-xs-12 text-center">
	<br>
	<h1 style="color: {{ ts.hcolor }}; background: {{ ts.hbg }}; font-size: {{ ts.hsize }}; font-family: '{{ ts.hfont }}';"> {{ ts.title }} </h1>
	<br>
    </div>
</div>
<div class="row">
{% if sli.status == 1 or vid.enable == 1 %}
    <div class="col-xs-4">
	{% else %}
	<div class="col-xs-12">
	{% endif %}
	<center>
	    <h1 id="hm1" style="color: {{ ts.tcolor }}; font-family: '{{ ts.tfont }}'; font-size: {{ ts.tsize }}; background: {{ ts.hbg }};">Heading</h1>
	    <br>
      <h1 id="hm3" style="color: {{ ts.h2color }}; font-family: '{{ ts.h2font }}'; font-size: {{ ts.h2size }}; background: {{ ts.hbg }};">Heading</h1>
      <br>
	    <h1 id="hm2" style="color: {{ ts.h2color }}; font-family: '{{ ts.h2font }}'; font-size: {{ ts.h2size }}; background: {{ ts.hbg }};">Heading</h1>
      <br>

	</center>
	</div>
	{% if sli.status == 1 %}
	<div class="col-xs-8">
	    {% if slides.count() >= 1 %}
	    {% if sli.effect == "fade" %}
	    <div id="carousel" data-interval="{{ sli.rotation }}" class="carousel slide carousel-fade" data-ride="carousel">
		{% endif %}
		<div id="carousel" data-interval="{{ sli.rotation }}" class="carousel slide" data-ride="carousel">
	    <ol class="carousel-indicators">
		{% for vv in range(0, slides.count()) %}
		{% if vv == 0 %}
		<li class="active" data-target="#carousel" data-slide-to="{{ vv }}"></li>
		{% else %}
		<li data-target="#carousel" data-slide-to="{{ vv }}"></li>
		{% endif %}
		{% endfor %}
	    </ol>
	    <div class="carousel-inner">
		{% for cc in slides %}
		{% if cc.id == slides.first().id %}
		<div class="item active">
		    {% else %}
		    <div class="item">
			{% endif %}
			{% if cc.bname[:3]=="rgb" %}
			<span class="img-responsive" style="background:{{ cc.bname }}; height: 600px; width: 1300px">
			</span>
			{% else %}
			<img src="{{ url_for('static', filename='multimedia/'+cc.bname) }}" class="img-responsive" style="height: 600px; width: 1300px">
			{% endif %}
			<div class="carousel-caption">
			    <h2 style="color: {{ cc.hcolor }}; font-family: {{ cc.hfont }}; font-size: {{ cc.hsize }}; background: {{ cc.hbg }};">{{ cc.title }}</h2>
			    <p style="color: {{ cc.tcolor }}; font-family: {{ cc.tfont }}; font-size: {{ cc.tsize }}; background: {{ cc.hbg }};">{{ cc.subti }}</p>
			</div>
		    </div>
		    {% endfor %}
		</div>
		{% if sli.navigation == 1 %}
		<a class="left carousel-control" href="#carousel" data-slide="prev">
		    <i class="icon-prev  fa fa-angle-left"></i></a>
		<a class="right carousel-control" href="#carousel" data-slide="next"><i class="icon-next fa fa-angle-right"></i></a>
		{% endif %}
	    </div>
	</div>
	{% else %}
  {% if ar %}
  <h1 class="text-center text-danger bg-muted" style="font-size: 400%">
	    لا شرائح متوفرة ليتم عرضها
	</h1>
  {% else %}
	<h1 class="text-center text-danger bg-muted" style="font-size: 400%">
	    No slides to be displayed ..
	</h1>
  {% endif %}
	{% endif %}
    </div>
{% elif vid.enable == 1 %}
<div class="col-xs-8">
  <video id='vidd'
  src="{{ url_for('static', filename='multimedia/'+vid.vname) }}"
  height="600px" width="1300px" autoplay
  {% if vid.controls == 1 %} controls {% endif %}
  {% if vid.ar == 1 %} loop {% endif %}
  {% if vid.mute == 1 %} muted {% endif %}>
  </video>
</div>
{% endif %}
</div>

<div class="row text-center">
     <div class="col-xs-3">
        <h1 id="hs1" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      </div>
      <div class="col-xs-3">
	      <h1 id="hs2" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      </div>
      <div class="col-xs-3">
      	<h1 id="hs3"  style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      </div>
      <div class="col-xs-3">
      	<h1 id="hs4" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      </div>
</div>
{% if sli.status == 2 and vid.enable == 2 %}
<div class="row text-center">
    <div class="col-xs-3">
    	<h1 id="hs5" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
    	<h1 id="hs6" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
    	<h1 id="hs7" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
    	<h1 id="hs8" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
</div>
{% endif %}
</div>


{% elif tv == 1 %}
<div class="row">
    <div class="col-xs-12 text-center">
	<br>
	<h1 style="color: {{ ts.hcolor }}; background: {{ ts.hbg }}; font-size: {{ ts.hsize }}; font-family: {{ ts.hfont }};"> {{ ts.title }} </h1>
	<br>
    </div>
</div>
<div class="row text-center">
    <div class="col-xs-4">
	    <h1 id="hm1" style="color: {{ ts.tcolor }}; font-family: {{ ts.tfont }}; font-size: {{ ts.tsize }}; background: {{ ts.hbg }};">Heading</h1>
	  </div>
    <div class="col-xs-4">
      <h1 id="hm3" style="color: {{ ts.h2color }}; font-family: {{ ts.h2font }}; font-size: {{ ts.h2size }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-4">
	    <h1 id="hm2" style="color: {{ ts.h2color }}; font-family: {{ ts.h2font }}; font-size: {{ ts.h2size }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
</div>
<div class="row text-center">
    <div class="col-xs-3">
	<br><br><br>
	<h1 id="hs1" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	<br><br><br>
	<h1 id="hs2" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	<br><br><br>
	<h1 id="hs3"  style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	<br><br><br>
	<h1 id="hs4" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
</div>
<div class="row text-center">
    <br>
    <div class="col-xs-3">
	<h1 id="hs5" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	<h1 id="hs6" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	<h1 id="hs7" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	<h1 id="hs8" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
</div>


{% elif tv == 2 %}
<div class="row vertical-center text-center">
    <div class="col-xs-6">
      <h1 style="color: {{ ts.hcolor }}; background: {{ ts.hbg }}; font-size: {{ ts.hsize }}; font-family: {{ ts.hfont }};"> {{ ts.title }} </h1>
      {{ brp * 2 }}
	    <h1 id="hm1" style="color: {{ ts.tcolor }}; font-family: {{ ts.tfont }}; font-size: {{ ts.tsize }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
      <h1 id="hm3" style="color: {{ ts.h2color }}; font-family: {{ ts.h2font }}; font-size: {{ ts.h2size }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
	    <h1 id="hm2" style="color: {{ ts.h2color }}; font-family: {{ ts.h2font }}; font-size: {{ ts.h2size }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	    <h1 id="hs1" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
	    <h1 id="hs2" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
	    <h1 id="hs3"  style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
      <h1 id="hs4" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
    <div class="col-xs-3">
	    <h1 id="hs5" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
  	  <h1 id="hs6" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
	    <h1 id="hs7" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
      {{ brp * 2 }}
  	  <h1 id="hs8" style="color: {{ ts.scolor }}; font-family: {{ ts.sfont }}; font-size: {{ ts.ssize }}; background: {{ ts.hbg }};">Heading</h1>
    </div>
</div>
{% endif %}

<!-- Hidden counter to fix identical changes -->
<p id='hcounter' style='display: none;'>
  0
</p>
{% if ts.audio != "false" %}
<audio id="audio_1" src="{{ url_for('static', filename='multimedia/'+ts.audio) }}"></audio>
{% endif %}
{% if ts.announce == "ar" or ts.announce == "en-us" %}
<audio id="audio_2" src="{{ af }}"></audio>
{% endif %}
{% if ts.announce == "both" %}
<audio id="audio_2" src="{{ url_for('static', filename='tts/' + ts.afile )}}"></audio>
<audio id="audio_3" src="{{ url_for('static', filename='tts/' + 'ar_' + ts.afile )}}"></audio>
{% endif %}
{% endblock %}
